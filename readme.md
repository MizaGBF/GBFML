# GBF Miza's Library  
Collection of common Assets, Javascript and CSS files to be used by my [GBF Asset Lookup](https://github.com/MizaGBF/GBFAL) and [GBF Animation Player](https://github.com/MizaGBF/GBFAP) projects to build their HTML pages.  
It's intended to be in a folder alongside the other projects:  
```
Root Folder/
├── GBFAL/
├── GBFML/
└── GBFAP/
```  
  
All lists further below are non-exhaustive.  
  
## Style Files  
  
### style.css  
The main CSS file, used for the [GBF Asset Lookup](https://github.com/MizaGBF/GBFAL) main page.  
  
## Javascript Files  
  
### gbf.js  
Requires `util.js`.  
Contains a class to handle types and corresponding index keys, along with returning endpoints for assets.  
Intended to be instantiated once in a global `gbf` variable upon initialization.  
  
### page.js  
Requires `gbf.js` and `util.js`.  
Used to build [GBF Asset Lookup](https://github.com/MizaGBF/GBFAL) and [GBF Animation Player](https://github.com/MizaGBF/GBFAP) pages, such as building the indexes or listing elements.  
Expect an `index` global variable to exist following the [GBF Asset Lookup](https://github.com/MizaGBF/GBFAL) format.  
[GBF Animation Player](https://github.com/MizaGBF/GBFAP) [overrides some functions](https://github.com/MizaGBF/GBFAP/blob/main/js/page_override.js) to bypass the format differences.  
  
List of callbacks:  
- `get_special_navigation_indexes(element_id, index_category_target, index_of_current_element_in_list, list_of_elements)`: Used for special "previous/next" navigation buttons, if you wish to "skip" along some elements in the list.  
- `index_onclick`: The onclick callback for elements generated by `list_elements`.  
- `bookmark_onclick`: The onclick callback for elements generated by `list_elements` for the bookmark list.  
- `history_onclick`: The onclick callback for elements generated by `list_elements` for the history list.  
  
### search.js  
Requires `page.js` and `util.js` (if a result area to populate is passed).  
Contains a class to generate search results.    
Intended to be instantiated once in a global `search` variable upon initialization.  
Expect an [GBF Asset Lookup](https://github.com/MizaGBF/GBFAL) or [GBF Animation Player](https://github.com/MizaGBF/GBFAP) `index` variable to exist with the `lookup` key to be set, containing an object of ID and lookup string pairs.  
  
List of callbacks:  
- `index_onclick`: The onclick callback for elements generated by `list_elements` for the populated result area.  
- `lookup(element_id)`: The function to call if `allow_lookup` is set.  
  
### audio_player.js  
A custom audio player.  
Requires `util.js`.  
  
### util.js  
Standalone.  
Contains utility functions.  
  
## JSON  
  
### config.json  
`config.json` must be loaded and passed to some functions at the start to initialize the index or set specific settings.  
Here's a list of some of them:  
- `help_form` (Optional String), url to the Google Form.  
- `index` (Object), the index layout.  
  
## Variables  
Some variables might require to be defined to be used for some features:  
- `timestamp` (Integer), for `clock()`.  
- `index` (Object), ideally in the [GBF Asset Lookup](https://github.com/MizaGBF/GBFAL) format, for most of the project.  
- `updated_key` (String), the localStorage key to handle the glow on the "tab-new" button.  
- `bookmark_key` (String), the localStorage key to save the bookmarks.  
- `history_key` (String), the localStorage key to save the history.  
- `search_save_key` (String), the localStorage key to save the search settings.  
  
## Lookup  
  
The text lookup is found in the `data.json` of the [GBF Asset Lookup](https://github.com/MizaGBF/GBFAL) and [GBF Animation Player](https://github.com/MizaGBF/GBFAP) pages and must be set in `index.lookup`.  
It's an Object, whose keys correspond to element IDs and the values to string describing the element, in **lower case**.  
The format is:  
```console
@@[Wiki_path] [Element] [Rarity] [Relation] [Name] [Series] [Races] [Gender] [Name JP] [Voice Actor] [Voice Actor JP] [Additional Tags]
```  
  
- `@@[Wiki_path]` indicates this element has a wiki page. Example: [@@Bahamut](https://gbf.wiki/Bahamut).  
- `[Element]` can be either `fire`, `water`, `earth`, `wind`, `light`, `dark`, `null`.  
- `[Rarity]` can be either `n`, `r`, `sr`, `ssr`.  
- `[Relation]` is the element relation to another. Example: `Narmaya's mother`.  
- `[Name]` is the element name in english.  
- `[Series]` is the element series, such as `summer`, `yukata`, `collab`, etc...  
- `[Races]` are the element races, such as `human`, `erune`, etc... Other is set to `unknown`, to not confuse with the other gender.  
- `[Gender]` is the element gender, either `male`, `female` or `other`.  
- `[Name JP]` is the element name in japanese.  
- `[Voice Actor]` is the element Voice Actor's name in english.  
- `[Voice Actor JP]` is the element Voice Actor's name in japanese.  
- `[Additional Tags]` are special tags used for search purpose. There are currently: `missing-help-wanted` (for elements with invalid or without lookup entries), `voiced` (for elements with voice files), `voice-only` (for elements with only voice files), `young` (for younger appearances of elements), `gbf-versus-rising` (for elements appearing Versus Rising) and `gbf-relink` (for elements appearing Relink).  
  